pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
-- main loop

num = 10
palabra = "joto"
shoot = 0
segundos = (30 / 2)

function _draw()
	
	cls()
	if btn(üÖæÔ∏è) then
		print("hola mundo")
	end
	
	if(shoot > 0) then
		shoot += 1
	end
	
	if(shoot >= segundos) then
		shoot = 0
	end
	
	if(btn(‚ùé) and shoot == 0) then
		personaje:shoot()
		shoot += 1
	end
	
	if(btn(üÖæÔ∏è)) then
		personaje:curar()
	end
	
	if(btn(‚û°Ô∏è)) then
		personaje:move(5)
	end
	
	if(btn(‚¨ÖÔ∏è)) then
		personaje:move(-5)
	end
	
	if(btn(‚¨ÜÔ∏è)) then
		personaje:move_y(-5)
	end
	
	if(btn(‚¨áÔ∏è)) then
		personaje:move_y(5)
	end
		
	if(personaje.vida < personaje.damage) then
		print("se murio")
		personaje.dead = true
	else
		personaje.dead = false
	end
	
	print("damage: " ..personaje.damage)
	print("nombre: " ..personaje.nombre)
	print(personaje.vida_restante().."/" .. personaje.vida)
	
	if(not personaje.dead) then
		personaje:draw()
	end
	

end
-->8
-- bala

-- clase bala
function bala(x, y)

	-- crear el objeto
	bullet = {}
	
	-- definimos propiedades
	bullet.x = x
	bullet.y = y
	bullet.life = 30*2
	
	
	-- definimos metodos
	function bullet:draw()
		spr(1, self.x, self.y)
	end
	
	function bullet:move()
		self.life -= 1
		self.y -= 1
	end
	
	
	return bullet;
	
end
-->8
-- personaje

personaje = {}

personaje.nombre = "pepe"
personaje.damage = 10
personaje.vida = 15
personaje.damage_value=5
personaje.x = 0
personaje.y = 0
personaje.dead = false
personaje.balas = {}
personaje.disparos = 5


function personaje:curar()
	self.damage -= self.damage_value
end

function personaje:dano()
	self.damage += self.damage_value
end

function personaje:vida_restante()
	return personaje.vida - personaje.damage
end

function personaje:move(step) 
	self.x += step
end

function personaje:move_y(step) 
	self.y += step
end

function personaje:draw()
	
	for i=1, count(self.balas), 1 do
		if(self.balas[i] != nil) then
			self.balas[i]:draw()
			self.balas[i]:move()
			if(self.balas[i].life <= 0)then
				del(self.balas, self.balas[i])
			end
		end
	end
	
	rectfill(self.x, self.y, self.x + 4, self.y + 4, 10);
end

function personaje:shoot()
	
	if(self.disparos > 0) then
		sfx(0)
		add(self.balas, bala(self.x, self.y))
		self.disparos -= 1
	else
		sfx(1)
	end
	
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000006006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000100000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000000000130500f0500f0500f050130500f0500f050180500f0500f0501e0500f0500e0500d0500d0500c0500c0500c0500b0500a0500905009050080500805008050080502c05000000000000000000000
000100000565005650056300453004530045300453004530045300563004530045300763004530045100b63004530045300b63004530045300453004530045300964007630076200762007650066500000000000
__music__
00 01424344

